(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{16:function(e,t,c){},18:function(e,t,c){},20:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(10),i=c.n(s),d=(c(16),c(2)),r=c(7),o=c(3),l=function(e){localStorage.setItem("user",JSON.stringify(e))},u=JSON.parse(localStorage.getItem("user")),j=[{id:0,name:"\u0415\u0432\u0433\u0435\u043d\u0438\u0439",surname:"\u0417\u0430\u0432\u0435\u0440\u0437\u0438\u043d",token:"qwe",login:"123",password:"123"},{id:1,name:"\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440",surname:"\u0412\u043e\u0441\u0442\u043e\u0440\u043e\u0432",token:"asd",login:"1234",password:"1234"},{id:2,name:"\u0415\u0433\u043e\u0440",token:"zxc",surname:"\u0418\u0432\u0430\u043d\u043e\u0432",login:"12345",password:"12345"}],m=[{dialogs:[{id:0,name:"\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440",surname:"\u0412\u043e\u0441\u0442\u043e\u0440\u043e\u0432",token:"asd",messages:[{id:0,user:!0,checked:!1,message:"M\u044b \u0434\u0430\u0434\u0438\u043c \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u0440\u0435\u043c\u043e\u043d\u0442\u0443 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u0440\u0430\u0437\u0443 \u0434\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043d\u0430\u043c",date:new Date("2021-10-28 9:15")},{id:1,checked:!1,message:"\u0438\u043c\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u0435\u043b \u043a\u043e\u043d\u0444\u043b\u0438\u043a\u0442 \u043d\u0430 \u0431\u044b\u0442\u043e\u0432\u043e\u0439 \u043f\u043e\u0447\u0432\u0435, \u0432 \u0445\u043e\u0434\u0435 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e",date:new Date("2021-10-28 9:20")},{id:2,checked:!1,message:"\u041d\u0430\u043f\u043e\u043c\u043d\u0438\u043c, \u0447\u0442\u043e \u0440\u0430\u043d\u0435\u0435 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440 Bloomberg \u041c\u0430\u0440\u043a \u0413\u0443\u0440\u043c\u0430\u043d \u0437\u0430\u044f\u0432\u0438\u043b, \u0447\u0442\u043e Apple \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u0442 Apple M1X \u0443\u0436\u0435",date:new Date("2021-10-28 9:37")},{id:3,user:!0,checked:!1,message:"\u041d\u043e\u0432\u044b\u0435 \u0430\u0431\u043e\u043d\u0435\u043d\u0442\u044b \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430 \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0442\u0430\u0440\u0438\u0444",date:new Date("2021-10-28 10:33")}]},{id:1,name:"\u0415\u0433\u043e\u0440",surname:"\u0418\u0432\u0430\u043d\u043e\u0432",token:"zxc",messages:[]}]},{dialogs:[{id:0,name:"\u0415\u0432\u0433\u0435\u043d\u0438\u0439",surname:"\u0417\u0430\u0432\u0435\u0440\u0437\u0438\u043d",token:"qwe",messages:[{id:0,checked:!1,message:"M\u044b \u0434\u0430\u0434\u0438\u043c \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u0440\u0435\u043c\u043e\u043d\u0442\u0443 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u0440\u0430\u0437\u0443 \u0434\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043d\u0430\u043c",date:new Date("2021-10-28 9:15")},{id:1,user:!0,checked:!1,message:"\u0438\u043c\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u0435\u043b \u043a\u043e\u043d\u0444\u043b\u0438\u043a\u0442 \u043d\u0430 \u0431\u044b\u0442\u043e\u0432\u043e\u0439 \u043f\u043e\u0447\u0432\u0435, \u0432 \u0445\u043e\u0434\u0435 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e",date:new Date("2021-10-28 9:20")},{id:2,user:!0,checked:!1,message:"\u041d\u0430\u043f\u043e\u043c\u043d\u0438\u043c, \u0447\u0442\u043e \u0440\u0430\u043d\u0435\u0435 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440 Bloomberg \u041c\u0430\u0440\u043a \u0413\u0443\u0440\u043c\u0430\u043d \u0437\u0430\u044f\u0432\u0438\u043b, \u0447\u0442\u043e Apple \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u0442 Apple M1X \u0443\u0436\u0435",date:new Date("2021-10-28 9:37")},{id:3,checked:!1,message:"\u041d\u043e\u0432\u044b\u0435 \u0430\u0431\u043e\u043d\u0435\u043d\u0442\u044b \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430 \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0442\u0430\u0440\u0438\u0444",date:new Date("2021-10-28 10:33")}]},{id:1,name:"\u0415\u0433\u043e\u0440",surname:"\u0418\u0432\u0430\u043d\u043e\u0432",token:"zxc",messages:[]}]},{dialogs:[{id:0,name:"\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440",surname:"\u0412\u043e\u0441\u0442\u043e\u0440\u043e\u0432",token:"asd",messages:[]},{id:1,name:"\u0415\u0432\u0433\u0435\u043d\u0438\u0439",surname:"\u0417\u0430\u0432\u0435\u0440\u0437\u0438\u043d",token:"qwe",messages:[]}]}],g=function(e,t){switch(t.type){case"UPDATE_DIALOG":return Object(o.a)(Object(o.a)({},e),{},{dialog:t.currentDialog});case"ADD_MESSAGE":var c=Object(o.a)({},e);return c.chat[e.currentAccount.id].dialogs[c.dialog.id].messages=[].concat(Object(r.a)(e.chat[e.currentAccount.id].dialogs[c.dialog.id].messages),[{id:t.id,date:t.date,user:t.user,message:t.message,checked:t.checked}]),c.chat[t.accountId].dialogs[c.dialog.id].messages=[].concat(Object(r.a)(e.chat[t.accountId].dialogs[c.dialog.id].messages),[{id:t.id,date:t.date,message:t.message,checked:t.checked}]),l(c.chat),Object(o.a)({},c);case"REMOVE_MESSAGE":var n=Object(o.a)({},e),a=n.chat[e.currentAccount.id].dialogs[t.index].messages.filter((function(e){return!e.checked}));return n.chat[e.currentAccount.id].dialogs[t.index].messages=a,l(n.chat),Object(o.a)({},n);case"CHECK_MESSAGE":var s=Object(o.a)({},e);return s.chat[e.currentAccount.id].dialogs[s.dialog.id].messages[t.messageIndex].checked=t.checked,Object(o.a)({},s);case"CURRENT_ACCOUNT":return Object(o.a)(Object(o.a)({},e),{},{currentAccount:t.currentAccount});case"UPDATE_STATE":return Object(o.a)(Object(o.a)({},e),{},{chat:t.state});default:return e}},b=c(0),h={chat:m},O=Object(n.createContext)(h),_=function(e){var t=e.children,c=Object(n.useReducer)(g,h),a=Object(d.a)(c,2),s=a[0],i=a[1];return Object(n.useEffect)((function(){var e=function(e){e.newValue&&i({type:"UPDATE_STATE",state:JSON.parse(e.newValue)})};return u?i({type:"UPDATE_STATE",state:u}):l(s.chat),window.addEventListener("storage",e),function(){return window.removeEventListener("storage",e)}}),[]),Object(b.jsx)(O.Provider,{value:[s,i],children:t})},x=function(){var e=Object(n.useContext)(O),t=Object(d.a)(e,1)[0];return Object(b.jsx)("div",{className:"header__contacts",children:Object(b.jsx)("p",{className:"user__name__text",children:t.currentAccount.name+" "+t.currentAccount.surname})})},v=function(){var e=Object(n.useContext)(O),t=Object(d.a)(e,2),c=t[0],a=t[1],s=function(e){return e.name.split(" ").map((function(e){return e[0]})).join("")+e.surname.split(" ").map((function(e){return e[0]})).join("")};return Object(b.jsx)("div",{className:"dialogs",children:c.chat[c.currentAccount.id].dialogs.map((function(e,t){var n,i;return Object(b.jsxs)("div",{className:"".concat((null===(n=c.dialog)||void 0===n?void 0:n.id)===t&&"dialog__active"," dialog"),onClick:function(){!function(e){a({type:"UPDATE_DIALOG",currentDialog:e})}(e)},children:[Object(b.jsx)("div",{className:"avatar",children:Object(b.jsx)("b",{children:s(e)})}),Object(b.jsxs)("div",{className:"user",children:[Object(b.jsxs)("div",{className:"user__name__date",children:[Object(b.jsx)("p",{className:"user__name__text",children:e.name+" "+e.surname}),Object(b.jsx)("p",{className:"user__date__text",children:"\u043f\u044f\u0442\u043d\u0438\u0446\u0430"})]}),e.messages&&Object(b.jsx)("div",{className:"user__dialog",children:Object(b.jsx)("p",{className:"user__dialog__text",children:null===(i=e.messages[e.messages.length-1])||void 0===i?void 0:i.message})})]})]},t)}))})},p=(c(18),function(){return Object(b.jsxs)("div",{className:"contacts",children:[Object(b.jsx)(x,{}),Object(b.jsx)(v,{})]})}),f=(c(8),function(){var e,t,c,a=Object(n.useContext)(O),s=Object(d.a)(a,2),i=s[0],r=s[1],o=i.chat[i.currentAccount.id].dialogs[null===(e=i.dialog)||void 0===e?void 0:e.id],l=(null===o||void 0===o?void 0:o.name)+" "+(null===o||void 0===o?void 0:o.surname),u=(null===o||void 0===o?void 0:o.name.split(" ").map((function(e){return e[0]})).join(""))+(null===o||void 0===o?void 0:o.surname.split(" ").map((function(e){return e[0]})).join(""));return Object(b.jsxs)("div",{className:"header__chat",children:[i.chat[i.currentAccount.id].dialogs[null===(t=i.dialog)||void 0===t?void 0:t.id]&&Object(b.jsxs)("div",{className:"header__name",children:[Object(b.jsx)("div",{className:"header__avatar",children:Object(b.jsx)("b",{children:u})}),Object(b.jsx)("p",{className:"user__name__text",children:l})]}),(null===(c=i.dialog)||void 0===c?void 0:c.messages.find((function(e){return!0===e.checked})))&&Object(b.jsx)("div",{className:"dialogs_delete",children:Object(b.jsx)("button",{className:"dialog__button_remove",onClick:function(){return e=i.dialog.id,void r({type:"REMOVE_MESSAGE",index:e});var e},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]})}),k=c(11),N=c.n(k),A=function(e){var t=e.item,c=e.index,a=Object(n.useContext)(O),s=Object(d.a)(a,2)[1];return Object(b.jsxs)("div",{className:"container__icon",children:[Object(b.jsx)("img",{height:"16px",width:"16px",src:"/images/check-mark.png",alt:"checkbox",className:t.checked?"checkbox__image_checked":"checkbox__image"}),Object(b.jsx)("input",{id:c,className:"input__checkbox",type:"checkbox",checked:t.checked,onChange:function(){var e,n;e=c,n=!t.checked,s({type:"CHECK_MESSAGE",messageIndex:e,checked:n})}})]})},E=0,C=function(){var e,t,c,a=Object(n.useContext)(O),s=Object(d.a)(a,1)[0],i=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e,t;if((null===(e=s.dialog)||void 0===e||null===(t=e.messages)||void 0===t?void 0:t.length)!==E){var c,n,a=i.current.scrollHeight-i.current.clientHeight;i.current.scrollTo(0,a),E=null===(c=s.dialog)||void 0===c||null===(n=c.messages)||void 0===n?void 0:n.length}}),[s]),Object(b.jsxs)("div",{ref:i,className:"dialog__users",children:[s.dialog&&(null===(e=s.chat[s.currentAccount.id])||void 0===e||null===(t=e.dialogs[s.dialog.id].messages)||void 0===t?void 0:t.map((function(e,t){return Object(b.jsx)("label",{htmlFor:t,className:"dialog__container",children:Object(b.jsxs)("div",{className:"message__position ".concat(e.user?"message__right":"message__left"," ").concat(e.checked&&"message_selected"),children:[Object(b.jsx)(A,{item:e,index:t}),Object(b.jsxs)("div",{className:"message__container ".concat(e.checked&&" message_selected"),children:[Object(b.jsx)("p",{className:"message__users",children:e.message}),Object(b.jsx)("p",{className:"message__date",children:N()(e.date).format("HH:mm ")})]})]})},t)}))),s.dialog&&0===(null===(c=s.dialog.messages)||void 0===c?void 0:c.length)&&Object(b.jsx)("div",{className:"dialog__empty",children:Object(b.jsx)("p",{className:"empty__message",children:"\u0421 \u044d\u0442\u0438\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c \u0432\u044b \u043d\u0435 \u043f\u0435\u0440\u0435\u043f\u0438\u0441\u044b\u0432\u0430\u043b\u0438\u0441\u044c"})})]})},S=function(){var e=Object(n.useContext)(O),t=Object(d.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(""),i=Object(d.a)(s,2),r=i[0],o=i[1];return Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r.length>0&&(a({type:"ADD_MESSAGE",id:c.chat[c.currentAccount.id].dialogs[c.dialog.id].messages.length,date:new Date,user:!0,message:r,checked:!1,accountId:j.findIndex((function(e){var t;return e.token===(null===(t=c.dialog)||void 0===t?void 0:t.token)}))}),o(""))},className:"input",children:[Object(b.jsx)("input",{type:"text",value:r,onChange:function(e){return o(e.target.value)},className:"dialog__input"}),Object(b.jsx)("button",{type:"submit",className:"input__button",children:Object(b.jsx)("img",{src:"/images/send-button.png",alt:"send button"})})]})},w=function(){return Object(b.jsxs)("div",{className:"chat",children:[Object(b.jsx)(f,{}),Object(b.jsx)(C,{}),Object(b.jsx)(S,{})]})},D=(c(9),function(){var e=Object(n.useContext)(O),t=Object(d.a)(e,2)[1],c=Object(n.useState)("123"),a=Object(d.a)(c,2),s=a[0],i=a[1],r=Object(n.useState)("123"),o=Object(d.a)(r,2),l=o[0],u=o[1],m=Object(n.useState)(""),g=Object(d.a)(m,2),h=g[0],_=g[1],x=function(e){e.preventDefault();var c=j.find((function(e){return e.login===s&&e.password===l}));c?(t({type:"CURRENT_ACCOUNT",currentAccount:c}),i(""),u("")):_("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c")};return Object(b.jsx)("form",{onSubmit:x,className:"signIn__form",children:Object(b.jsxs)("div",{className:"signIn",children:[Object(b.jsx)("label",{className:"signIn__label",children:"\u041b\u043e\u0433\u0438\u043d"}),Object(b.jsx)("input",{className:"signIn__input",type:"text",value:s,onChange:function(e){return i(e.target.value)}}),Object(b.jsx)("label",{className:"signIn__label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(b.jsx)("input",{className:"signIn__input",type:"text",value:l,onChange:function(e){return u(e.target.value)}}),Object(b.jsx)("button",{className:"signIn__button",onClick:function(e){return x(e)},type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"}),h&&Object(b.jsx)("p",{children:h})]})})}),I=function(){var e=Object(n.useContext)(O),t=Object(d.a)(e,1)[0];return Object(b.jsx)("div",{className:"App",children:t.currentAccount?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p,{}),Object(b.jsx)(w,{})]}):Object(b.jsx)(D,{})})},y=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,21)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),s(e),i(e)}))};i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(_,{children:Object(b.jsx)(I,{})})}),document.getElementById("root")),y()},8:function(e,t,c){},9:function(e,t,c){}},[[20,1,2]]]);
//# sourceMappingURL=main.85e913cf.chunk.js.map